<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../estilo/style.css">
</head>
<body>
    
    <div class="carrossel-container">
        <div class="carrossel">
            <img src="imagens/banner1.jpg" alt="1">
            <img src="imagens/banner2.jpg" alt="2">
            <img src="imagens/banner3.jpg" alt="3">
            <img src="imagens/banner4.jpg" alt="4">
        </div>
        <button class="seta seta-anterior">&#10094;</button>
        <button class="seta seta-proximo">&#10095;</button>
    </div>

    <h1>Catálogo de Produtos</h1>

    <div class="produtos-container">

        <!--Produto 1-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 1 - Descrição do Item</div>
            <div class="preco">R$ 19,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>
    

        <!--Produto 2-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 2 - Descrição do Item</div>
            <div class="preco">R$ 29,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>
    

        <!--Produto 3-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 3 - Descrição do Item</div>
            <div class="preco">R$ 39,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>

        <!--Produto 4-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 4 - Descrição do Item</div>
            <div class="preco">R$ 49,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>
    

        <!--Produto 5-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 5 - Descrição do Item</div>
            <div class="preco">R$ 59,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>

        <!--Produto 6-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 6 - Descrição do Item</div>
            <div class="preco">R$ 59,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>

        <!--Produto 7-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 7 - Descrição do Item</div>
            <div class="preco">R$ 59,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>

        <!--Produto 8-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 8 - Descrição do Item</div>
            <div class="preco">R$ 59,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>

        <!--Produto 9-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 9 - Descrição do Item</div>
            <div class="preco">R$ 59,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>

        <!--Produto 10-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 10 - Descrição do Item</div>
            <div class="preco">R$ 59,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>

        <!--Produto 11-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 11 - Descrição do Item</div>
            <div class="preco">R$ 59,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>

        <!--Produto 12-->
        <div class="produto">
            <div class="imagem-produto"><img src="" alt=""></div>
            <div class="descricao">Produto 12 - Descrição do Item</div>
            <div class="preco">R$ 59,90</div>
            <button class="botao-carrinho">Adicionar ao Carrinho</button>
        </div>
    </div>

    <!--Botão carrinho-->
    <button id="btn-carrinho" aria-label="Abrir carrinho">
        &#x1F6D2; <!--Código hexadecimal que chama o emoji de um carrinho de compras, desempenhando o papel do ícone aqui-->
        <span id="contador-quantidade">0</span>
    </button>

    <!--Aba lateral-->
    <aside id="carrinho-lateral" aria-label="Carrinho de compras">
        <h2>Seu Carrinho</h2>
        <div id="itens-carrinho"></div>
        <div id="total-carrinho">Total: R$ 0,00</div>
        <button id="btn-finalizar">Finalizar Compra</button>
    </aside>

    <section id="sac">
        <h1>Serviço de Atendimento ao Cliente (SAC)</h1>
        <p>Se você tem alguma dúvida ou deseja fazer uma reclamação, entre em contato conosco através dos seguintes canais:</p>
        <ul>
            <li>Email: <a href="mailto:atendimento@loja.com">atendimento@loja.com</a></li>
            <li>Telefone: <strong>(11) 1234-5678</strong></li>
            <li>WhatsApp: <a href="https://"></a></li>
        </ul>
    </section>

    <script>
        //Elementos principais do carrinho
        const btnContadorCarrinho = document.getElementById('btn-carrinho');
        const carrinho = document.getElementById('carrinho-lateral');
        const itensCarrinho = document.getElementById('itens-carrinho');
        const totalCarrinho = document.getElementById('total-carrinho');
        const contadorQuantidade = document.getElementById('contador-quantidade');
        const btnFinalizar = document.getElementById('btn-finalizar');

        //Objeto que armazena os produtos adicionados ao carrinho
        let carrinhoProdutos = {};

        //Inicializa contador oculto
        contadorQuantidade.style.display = 'none';

        // Função auxiliar para formatar valores para moeda brasileira
        function formatarPreco(valor) {
            return valor.toLocaleString('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            });
        }

        //Adiciona os eventos de clique nos botões de "Adicionar ao carrinho"
        function configurarBotoesAdicionarCarrinho() {

            document.querySelectorAll('.botao-carrinho').forEach((botao, index) => {
            botao.addEventListener('click', () => {
                const produtoEl = botao.closest('.produto');

                // Coleta os dados do produto
                const descricao = produtoEl.querySelector('.descricao').textContent.trim();
                const precoTexto = produtoEl.querySelector('.preco').textContent.trim();
                const preco = parseFloat(precoTexto.replace('R$', '').replace('.', '').replace(',', '.'));
                const imgEl = produtoEl.querySelector('img');
                const imgSrc = imgEl ? imgEl.src : '';

                // Verifica se o produto já está no carrinho (usando índice como ID)
                if (carrinhoProdutos[index]) {
                    carrinhoProdutos[index].quantidade++;
                } else {
                    carrinhoProdutos[index] = {
                        descricao,
                        preco,
                        img: imgSrc,
                        quantidade: 1
                    };
                }
                // Atualiza a interface do carrinho e o abre
                atualizarCarrinho();
                carrinho.classList.add('aberto');
            });
        });
    }

    // Atualiza a interface do carrinho lateral
    function atualizarCarrinho() {
        itensCarrinho.innerHTML = '';
        let quantidadeTotal = 0;
        let total = 0;

        // Percorre todos os itens do carrinho
        for (const id in carrinhoProdutos) {
            const item = carrinhoProdutos[id];
            const subtotal = item.preco * item.quantidade;
            total += subtotal;
            quantidadeTotal += item.quantidade;

            // Cria elemento HTML para o item no carrinho
            const divItem = document.createElement('div');
            divItem.classList.add('item-carrinho');
            divItem.innerHTML = `
                <img src="${item.img}" alt="${item.descricao}" />
                <div class="item-carrinho-info">
                    <p class="descricao">${item.descricao}</p>
                    <p class="preco">${formatarPreco(item.preco)} x <span class="quantidade">${item.quantidade}</span> = ${formatarPreco(subtotal)}</p>
                    <div class="quantidade-container">
                        <button class="btn-quantidade" data-id="${id}" data-acao="diminuir">-</button>
                        <span>${item.quantidade}</span>
                        <button class="btn-quantidade" data-id="${id}" data-acao="aumentar">+</button>
                    </div>
                </div>
            `;
            itensCarrinho.appendChild(divItem);
        }

        // Atualiza o total e a quantidade exibida
        totalCarrinho.textContent = `Total: ${formatarPreco(total)}`;
        contadorQuantidade.textContent = quantidadeTotal;
        contadorQuantidade.style.display = quantidadeTotal > 0 ? 'inline-block' : 'none';

        // Reconfigura os botões de quantidade
        configurarBotoesQuantidade();
    }

    // Configura os eventos de alteração de quantidade dos produtos no carrinho
    function configurarBotoesQuantidade() {
        document.querySelectorAll('.btn-quantidade').forEach(btn => {
            btn.addEventListener('click', () => {
                const id = btn.getAttribute('data-id');
                const acao = btn.getAttribute('data-acao');

                if (acao === 'aumentar') {
                    carrinhoProdutos[id].quantidade++;
                } else if (acao === 'diminuir') {
                    carrinhoProdutos[id].quantidade--;
                    if (carrinhoProdutos[id].quantidade < 1) {
                        delete carrinhoProdutos[id];
                    }
                }

                // Atualiza o carrinho após mudança
                atualizarCarrinho();
            });
        });
    }

    // Alterna a visibilidade do carrinho lateral
    function configurarBotaoAbrirFecharCarrinho() {
        btnContadorCarrinho.addEventListener('click', () => {
            carrinho.classList.toggle('aberto');
        });
    }

    // Redireciona para a página de finalização da compra
    function configurarBotaoFinalizarCompra() {
        btnFinalizar.addEventListener('click', () => {
            window.location.href = 'finalizar.html';
        });
    }

    // Função de inicialização do sistema de carrinho
    function inicializarCarrinho() {
        configurarBotoesAdicionarCarrinho();
        configurarBotaoAbrirFecharCarrinho();
        configurarBotaoFinalizarCompra();
    }

    // Inicializa tudo
    inicializarCarrinho();

    // Carrossel
    const carrossel = document.querySelector('.carrossel');
    const imagens = document.querySelectorAll('.carrossel img');
    const btnAnterior = document.querySelector('.seta-anterior');
    const btnProximo = document.querySelector('.seta-proximo');
    let indiceAtual = 0;

    function atualizarCarrossel() {
        carrossel.style.transform = `translateX(-${indiceAtual * 100}%)`;
    }

    btnAnterior.addEventListener('click', () => {
        indiceAtual = (indiceAtual === 0) ? imagens.length - 1 : indiceAtual - 1;
        atualizarCarrossel();
    });

    btnProximo.addEventListener('click', () => {
        indiceAtual = (indiceAtual === imagens.length - 1) ? 0 : indiceAtual + 1;
        atualizarCarrossel();
    });

    </script>
</body>
</html>